
ext.documentationDir = "documentation"
ext.documentationBuildDir = "$buildDir/$documentationDir"
ext.versionInfoFile = "$documentationBuildDir/versionInfo.txt"
ext.version = "1.0.0"

task clean(type: Delete) {
	delete buildDir
}

task cleanDocumentation(type: Delete) {
	delete documentationBuildDir
}

task versionInfo(type: VersionInfoToFileTask) {
    destination = project.versionInfoFile
	version = project.version
}

class VersionInfoToFileTask extends DefaultTask {

    def destination
	def version

    File getDestination() {
        project.file(destination)
    }

    @TaskAction
    def versionInfo() {
        def file = getDestination()
        file.parentFile.mkdirs()
        file.write "Documentation for gradle-jug tasks \nVersion : $version"
    }
}

task copyDocumentation(type: Copy) {
    from documentationDir
    into documentationBuildDir
}

task assembleDocumentation(type: Zip) {
	baseName = "gradlejug"
	classifier = documentationDir
	destinationDir = file("$buildDir/libs")
	from documentationBuildDir
}



task assemble(dependsOn: ['cleanDocumentation', 'versionInfo', 'copyDocumentation', 'assembleDocumentation']) << {
	println "Assemble task"
}





/*


	versionInfo.onlyIf { Task task ->
        project.hasProperty('release')
    }

*/